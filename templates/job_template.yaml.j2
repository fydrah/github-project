- project:
    name: {{ target_name }}
    disabled: false
    git: {{ target_git }}
    jobs:
      - '{name}'
      - '{name}/{kind}':
          kind: develop
- job-template:
    name: '{name}'
    project-type: folder
- job-template:
    name: '{name}/{kind}'
    project-type: multibranch
    parameters:
      - string:
          name: TARGET_GIT_USER
          value: {{ target_git_user }}
      - password:
          name: TARGET_GIT_TOKEN
          type: secrettext
          default: {{ target_git_token }}
    scm:
        - git:
            url: '{git}'
    periodic-folder-trigger: '1m'
    raw:
      xml: |
        <factory class="org.jenkinsci.plugins.workflow.multibranch.WorkflowBranchProjectFactory">
          <owner class="org.jenkinsci.plugins.workflow.multibranch.WorkflowMultiBranchProject" reference="../.."/>
          <scriptPath>jenkinsfiles/{kind}.groovy</scriptPath>
        </factory>
